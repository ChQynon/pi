from database import Database
from plant_care_tips import plant_care_manager

def load_initial_vitamin_data(db):
    """Load initial vitamin data into the database"""
    # Clear existing data
    db.vitamins.delete_many({})
    
    # Sample vitamin data
    vitamins_data = [
        {
            "name": "Витамин A",
            "aliases": ["Ретинол", "Каротин"],
            "short_description": "Жирорастворимый витамин, необходимый для зрения, иммунитета и здоровья кожи.",
            "description": "Витамин A — группа жирорастворимых ретиноидов, включающая ретинол, ретиналь и ретиноевую кислоту. Играет важную роль в формировании и поддержании здоровья органов зрения, кожи, иммунной системы.",
            "functions": "• Поддержание нормального зрения\n• Поддержка иммунной системы\n• Участие в делении и дифференциации клеток\n• Поддержание здоровья кожи и слизистых оболочек",
            "deficiency_signs": "• Ухудшение сумеречного зрения (куриная слепота)\n• Сухость кожи и слизистых оболочек\n• Повышенная восприимчивость к инфекциям\n• Нарушение роста у детей",
            "overdose_signs": "• Тошнота и рвота\n• Головная боль и головокружение\n• Раздражительность\n• Выпадение волос\n• В тяжелых случаях — поражение печени",
            "daily_dose": "Взрослые: 900 мкг (мужчины), 700 мкг (женщины)\nДети 1-3 года: 300 мкг\nДети 4-8 лет: 400 мкг\nДети 9-13 лет: 600 мкг",
            "sources": "• Печень трески и других рыб\n• Морковь, тыква, сладкий картофель\n• Шпинат, капуста, брокколи\n• Яичный желток\n• Сливочное масло\n• Сыр"
        },
        {
            "name": "Витамин C",
            "aliases": ["Аскорбиновая кислота"],
            "short_description": "Водорастворимый витамин, необходимый для иммунитета, заживления ран и антиоксидантной защиты.",
            "description": "Витамин C (аскорбиновая кислота) — важный водорастворимый витамин и мощный антиоксидант. Организм человека не способен самостоятельно синтезировать витамин C, поэтому необходимо получать его с пищей.",
            "functions": "• Синтез коллагена и соединительной ткани\n• Антиоксидантная защита\n• Укрепление иммунитета\n• Улучшение усвоения железа из растительной пищи\n• Участие в синтезе некоторых гормонов и нейромедиаторов",
            "deficiency_signs": "• Кровоточивость десен\n• Медленное заживление ран\n• Частые простудные заболевания\n• Сухость кожи\n• При сильном дефиците — цинга",
            "overdose_signs": "• Расстройство желудка, диарея\n• Тошнота\n• Спазмы в животе\n• Головная боль\n• Повышенная возбудимость",
            "daily_dose": "Взрослые: 75-90 мг\nПодростки: 65-75 мг\nДети 1-3 года: 15 мг\nДети 4-8 лет: 25 мг\nДети 9-13 лет: 45 мг\nБеременные: 85 мг\nКормящие: 120 мг",
            "sources": "• Цитрусовые фрукты (апельсины, лимоны, грейпфруты)\n• Киви\n• Клубника\n• Болгарский перец\n• Брокколи, капуста\n• Помидоры\n• Шиповник (лидер по содержанию витамина C)"
        },
        {
            "name": "Кальций",
            "aliases": ["Ca", "Calcium"],
            "short_description": "Основной минерал для формирования костей и зубов, также необходим для работы нервной системы и мышц.",
            "description": "Кальций — наиболее распространенный минерал в организме человека. Около 99% кальция содержится в костях и зубах, остальная часть циркулирует в крови и тканях, участвуя в важных физиологических процессах.",
            "functions": "• Формирование и поддержание здоровья костей и зубов\n• Регуляция мышечных сокращений\n• Передача нервных импульсов\n• Участие в процессе свертывания крови\n• Регуляция сердечного ритма",
            "deficiency_signs": "• Остеопороз (снижение плотности костной ткани)\n• Судороги в мышцах\n• Онемение и покалывание в пальцах\n• Нарушение сердечного ритма\n• У детей — рахит",
            "overdose_signs": "• Запоры\n• Камни в почках\n• Нарушение усвоения других минералов (железа, цинка)\n• Повышенная утомляемость\n• В тяжелых случаях — гиперкальциемия",
            "daily_dose": "Взрослые 19-50 лет: 1000 мг\nВзрослые 51+ лет: 1200 мг\nПодростки 9-18 лет: 1300 мг\nДети 4-8 лет: 1000 мг\nДети 1-3 года: 700 мг",
            "sources": "• Молочные продукты (молоко, йогурт, сыр)\n• Рыбные консервы с костями (сардины, лосось)\n• Обогащенные растительные напитки (соевое, миндальное молоко)\n• Зеленые листовые овощи (капуста, брокколи)\n• Бобовые\n• Орехи (особенно миндаль)"
        }
    ]
    
    # Insert data into the collection
    db.vitamins.insert_many(vitamins_data)
    print(f"Loaded {len(vitamins_data)} vitamin records")


def load_initial_plant_data(db):
    """Load initial plant care data into the database"""
    # Clear existing data
    db.plants.delete_many({})
    
    # Sample plant care data
    plants_data = [
        {
            "waste_type": "Яичная скорлупа",
            "short_description": "Натуральный источник кальция и других микроэлементов для ваших растений.",
            "description": "Яичная скорлупа — отличный источник кальция и других микроэлементов для растений. Кальций помогает растениям формировать крепкие клеточные стенки, стимулирует рост и помогает предотвратить такие проблемы, как вершинная гниль у томатов.",
            "application": "1. Тщательно вымойте скорлупу и высушите ее\n2. Измельчите в порошок (можно использовать кофемолку)\n3. Внесите в почву при посадке или пересадке (1-2 столовые ложки на растение)\n4. Для комнатных растений: рассыпьте тонким слоем по поверхности почвы (1 чайная ложка) и слегка заделайте\n5. Можно настоять порошок в воде (2 столовые ложки на 1 литр) в течение 24-48 часов, затем процедить и использовать для полива",
            "plants": "• Томаты и перцы (предотвращает вершинную гниль)\n• Розы и другие цветущие растения\n• Большинство комнатных растений (особенно полезно для кактусов и суккулентов)\n• Плодовые деревья и ягодные кустарники",
            "precautions": "• Не используйте скорлупу от яиц с признаками плесени или гнили\n• Не добавляйте слишком много скорлупы в почву для растений, предпочитающих кислую среду (азалии, гортензии, рододендроны)\n• Измельчайте скорлупу как можно мельче для лучшего усвоения растениями\n• После внесения скорлупы в почву хорошо полейте растение"
        },
        {
            "waste_type": "Кофейная гуща",
            "short_description": "Отличное удобрение, улучшающее структуру почвы и обогащающее ее азотом.",
            "description": "Кофейная гуща — ценное органическое удобрение, богатое азотом, калием и фосфором. Она также улучшает структуру почвы, удерживает влагу и может отпугивать некоторых вредителей, например, слизней и улиток.",
            "application": "1. Высушите использованную кофейную гущу на воздухе (чтобы избежать плесени)\n2. Внесите в почву при посадке или пересадке (смешайте с грунтом в пропорции 1:4)\n3. Используйте как мульчу, распределив тонким слоем (не более 1 см) вокруг растений\n4. Можно добавить в компост (не более 20% от общего объема)\n5. Для жидкой подкормки: настаивайте 1 стакан гущи в 4 литрах воды в течение суток, затем процедите и используйте для полива",
            "plants": "• Розы, гортензии и другие цветущие кустарники\n• Овощные культуры (томаты, перцы, баклажаны)\n• Декоративно-лиственные растения\n• Цитрусовые и другие комнатные растения, предпочитающие кислую почву",
            "precautions": "• Не используйте на растениях, предпочитающих щелочную почву\n• Избегайте использования свежей гущи, так как она может содержать слишком много кофеина\n• Не применяйте слишком часто и в больших количествах\n• Кофейная гуща может привлекать домашних животных, поэтому будьте осторожны\n• При использовании в помещении гуща может покрыться плесенью — своевременно удаляйте ее"
        },
        {
            "waste_type": "Банановая кожура",
            "short_description": "Богатый источник калия, фосфора и других питательных веществ для подкормки растений.",
            "description": "Банановая кожура содержит большое количество калия (около 42%), а также фосфор, кальций и магний — элементы, необходимые для здорового роста и цветения растений. Калий особенно полезен для стимуляции цветения и плодоношения.",
            "application": "1. Нарезанная кожура: измельчите кожуру на мелкие кусочки и закопайте в почву на глубину 5-7 см\n2. Сушеная и измельченная кожура: высушите кожуру, измельчите в порошок и рассыпьте вокруг растений (1-2 столовые ложки)\n3. Банановый чай: замочите кожуру в воде на 24-48 часов, затем удалите кожуру и используйте настой для полива\n4. Компост: добавьте измельченную кожуру в компостную кучу",
            "plants": "• Розы и другие цветущие растения\n• Томаты, перцы, огурцы и другие овощные культуры\n• Комнатные растения, особенно орхидеи\n• Плодовые деревья и ягодные кустарники",
            "precautions": "• Закапывайте кожуру, а не оставляйте на поверхности, чтобы избежать привлечения мух и других насекомых\n• Не используйте слишком много — это может привести к избытку калия\n• Убедитесь, что кожура полностью разложилась в почве перед посадкой новых растений\n• Желательно использовать органические бананы, чтобы избежать пестицидов"
        }
    ]
    
    # Insert data into the collection
    db.plants.insert_many(plants_data)
    print(f"Loaded {len(plants_data)} plant care records")


def initialize_plant_care_tips():
    """Initialize the plant care tips database"""
    # This will automatically load initial plant care tips if the database file doesn't exist
    tips_count = len(plant_care_manager.get_all_tips())
    print(f"Initialized plant care tips database with {tips_count} entries")
    return tips_count


def initialize_data():
    """Initialize all data for the bot"""
    try:
        # Connect to the database
        db = Database()
        
        # Load vitamins data
        load_initial_vitamin_data(db)
        
        # Load plant care tips
        load_initial_plant_data(db)
        
        # Initialize plant care tips database
        initialize_plant_care_tips()
        
        print("Data initialization complete")
        return True
    except Exception as e:
        print(f"Error initializing data: {e}")
        return False


if __name__ == "__main__":
    initialize_data() 